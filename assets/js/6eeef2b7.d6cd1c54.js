"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[89391],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var r=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=u(n),m=i,h=d["".concat(s,".").concat(m)]||d[m]||c[m]||a;return n?r.createElement(h,o(o({ref:t},p),{},{components:n})):r.createElement(h,o({ref:t},p))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:i,o[1]=l;for(var u=2;u<a;u++)o[u]=n[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},42794:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>u});var r=n(87462),i=(n(67294),n(3905));const a={description:"Grove - \xb15A DC/AC Current Sensor (ACS70331)",title:"Grove - \xb15A DC/AC Current Sensor (ACS70331)",keywords:["Grove"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S.png",last_update:{date:"1/9/2023",author:"jianjing Huang"}},o=void 0,l={unversionedId:"Sensor/Grove/Grove_Accessories/Current/Grove-5A_DC_AC_Current_Sensor-ACS70331",id:"Sensor/Grove/Grove_Accessories/Current/Grove-5A_DC_AC_Current_Sensor-ACS70331",title:"Grove - \xb15A DC/AC Current Sensor (ACS70331)",description:"Grove - \xb15A DC/AC Current Sensor (ACS70331)",source:"@site/docs/Sensor/Grove/Grove_Accessories/Current/Grove-5A_DC_AC_Current_Sensor-ACS70331.md",sourceDirName:"Sensor/Grove/Grove_Accessories/Current",slug:"/Sensor/Grove/Grove_Accessories/Current/Grove-5A_DC_AC_Current_Sensor-ACS70331",permalink:"/docusaurus_wiki/Sensor/Grove/Grove_Accessories/Current/Grove-5A_DC_AC_Current_Sensor-ACS70331",draft:!1,editUrl:"https://github.com/c1ev0ps/docusaurus_wiki/edit/main/docs/Sensor/Grove/Grove_Accessories/Current/Grove-5A_DC_AC_Current_Sensor-ACS70331.md",tags:[],version:"current",lastUpdatedBy:"jianjing Huang",lastUpdatedAt:1673222400,formattedLastUpdatedAt:"Jan 9, 2023",frontMatter:{description:"Grove - \xb15A DC/AC Current Sensor (ACS70331)",title:"Grove - \xb15A DC/AC Current Sensor (ACS70331)",keywords:["Grove"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S.png",last_update:{date:"1/9/2023",author:"jianjing Huang"}},sidebar:"ProductSidebar",previous:{title:"Grove - 10A DC Current Sensor (ACS725)",permalink:"/docusaurus_wiki/Sensor/Grove/Grove_Accessories/Current/Grove-10A_DC_Current_Sensor-ACS725"},next:{title:"Grove - 2.5A DC Current Sensor (ACS725)",permalink:"/docusaurus_wiki/Sensor/Grove/Grove_Accessories/Current/Grove-2.5A-DC-Current-Sensor-ACS70331"}},s={},u=[{value:"Feature",id:"feature",level:2},{value:"Specification",id:"specification",level:2},{value:"Working Principle",id:"working-principle",level:2},{value:"Hardware Overview",id:"hardware-overview",level:2},{value:"Platforms Supported",id:"platforms-supported",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"Play With Arduino",id:"play-with-arduino",level:3},{value:"DC Demo",id:"dc-demo",level:4},{value:"Hardware Connection",id:"hardware-connection",level:5},{value:"Software",id:"software",level:5},{value:"AC Demo",id:"ac-demo",level:4},{value:"FAQ",id:"faq",level:2},{value:"Schematic Online Viewer",id:"schematic-online-viewer",level:2},{value:"Resources",id:"resources",level:2},{value:"Tech Support",id:"tech-support",level:2}],p={toc:u};function d(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("div",{align:"center"},(0,i.kt)("img",{width:"{1000}",src:"https://files.seeedstudio.com/wiki/Grove--5A_DC-AC_Current_Sensor-ACS70331/img/101020615-preview.png"})),(0,i.kt)("p",null,"The Grove - \xb15A DC/AC Current Sensor (ACS70331) is a high precision DC/AC current sensor based on ACS70331. The ACS70331EESATR-005B3 is Allegro\u2019s high sensitivity,current sensor IC for <5 A current sensing applications. It incorporates giant magneto-resistive (GMR) technology that is 25 times more sensitive than traditional Hall-effect sensors to sense the magnetic field generated by the current flowing through the low resistance, integrated primary conductor."),(0,i.kt)("p",null,"The Grove - \xb15A DC/AC Current Sensor (ACS70331) can measure both the DC current and the AC current up to 5A with a base sensitivity of 200mV/A."),(0,i.kt)("p",{style:{textAlign:"center"}},(0,i.kt)("a",{href:"https://www.seeedstudio.com/Grove-5A-DC-AC-Current-Sensor-ACS70331-p-2928.html",target:"_blank"},(0,i.kt)("img",{src:"https://files.seeedstudio.com/wiki/Seeed-WiKi/docs/images/300px-Get_One_Now_Banner-ragular.png"}))),(0,i.kt)("h2",{id:"feature"},"Feature"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Support DC and AC load"),(0,i.kt)("li",{parentName:"ul"},"1 MHz bandwidth with response time <550 ns"),(0,i.kt)("li",{parentName:"ul"},"Low noise: 8 mA(rms) at 1 MHz"),(0,i.kt)("li",{parentName:"ul"},"1.1 m\u03a9 primary conductor resistance results in low power loss"),(0,i.kt)("li",{parentName:"ul"},"High DC PSRR enables use with low accuracy power supplies or batteries (3 to 4.5 V operation)"),(0,i.kt)("li",{parentName:"ul"},"Analog output")),(0,i.kt)("h2",{id:"specification"},"Specification"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,i.kt)("th",{parentName:"tr",align:null},"Value"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Supply voltage"),(0,i.kt)("td",{parentName:"tr",align:null},"3.3V / 5V")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Operating ambient temperature"),(0,i.kt)("td",{parentName:"tr",align:null},"-40 \u2013 85\u2103")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Storage temperature"),(0,i.kt)("td",{parentName:"tr",align:null},"- 65\xb0C \u2013 125\xb0C")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Working Voltage"),(0,i.kt)("td",{parentName:"tr",align:null},"<100V")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Current sensing range"),(0,i.kt)("td",{parentName:"tr",align:null},"0 \u2013 5A")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Sensitivity"),(0,i.kt)("td",{parentName:"tr",align:null},"200mV/A(Typ.)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Output interface"),(0,i.kt)("td",{parentName:"tr",align:null},"Grove Analog")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Input interface"),(0,i.kt)("td",{parentName:"tr",align:null},"Screw terminal")))),(0,i.kt)("h2",{id:"working-principle"},"Working Principle"),(0,i.kt)("p",null,"There are two types of current sensing: direct and indirect. Classification is mainly based on the technology used to measure current."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Direct sensing:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Ohm's Law")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Indirect seneing:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Faraday's Law of Induction"),(0,i.kt)("li",{parentName:"ul"},"Magnetic field sensors"),(0,i.kt)("li",{parentName:"ul"},"Faraday Effect")),(0,i.kt)("p",null,"The Grove - \xb15A DC/AC Current Sensor (ACS70331) uses magnetic field sensors technology. And there are three kinds of Magnetic field sensors technology:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Hall effect"),(0,i.kt)("li",{parentName:"ul"},"Flux gate sensors"),(0,i.kt)("li",{parentName:"ul"},"Magneto-resistive current sensor")),(0,i.kt)("p",null,"The Grove - \xb15A DC/AC Current Sensor (ACS70331) is based on the Magneto-resistive current sensor priciple, which is also known as GMR. A magneto-resistor (MR) is a two terminal device which changes its resistance parabolically with applied magnetic field. This variation of the resistance of MR due to the magnetic field is known as the Magnetoresistive Effect."),(0,i.kt)("p",null,"The internal construction of the ACS70331 QFN package is shown in Figure 2. The die sits above the primary current path such that magnetic field is produced in plane with the GMR elements on the die. GMR elements 1 and 2 sense field in the +X direction for positive IP current flow, and GMR elements 3 and 4 sense field in the \u2013X direction for positive IP current flow. This enables differential measurement of the current and rejection of external stray fields."),(0,i.kt)("div",{align:"center"},(0,i.kt)("figure",null,(0,i.kt)("p",{style:{textAlign:"center"}},(0,i.kt)("a",{href:"https://files.seeedstudio.com/wiki/Grove-2.5A_DC_Current_Sensor-ACS70331/img/principle1.jpg",target:"_blank"},(0,i.kt)("img",{src:"https://files.seeedstudio.com/wiki/Grove-2.5A_DC_Current_Sensor-ACS70331/img/principle1.jpg"}))),(0,i.kt)("figcaption",null,(0,i.kt)("b",null,"Figure 1"),". ",(0,i.kt)("i",null,"ACS70331 Internal Construction")))),(0,i.kt)("p",null,"The four GMR elements are arranged in a Wheatstone bridge configuration as shown in Figure 2 such that the output of the bridge is proportional to the differential field sensed by the four elements, rejecting common fields."),(0,i.kt)("div",{align:"center"},(0,i.kt)("figure",null,(0,i.kt)("p",{style:{textAlign:"center"}},(0,i.kt)("a",{href:"https://files.seeedstudio.com/wiki/Grove-2.5A_DC_Current_Sensor-ACS70331/img/principle2.jpg",target:"_blank"},(0,i.kt)("img",{src:"https://files.seeedstudio.com/wiki/Grove-2.5A_DC_Current_Sensor-ACS70331/img/principle2.jpg"}))),(0,i.kt)("figcaption",null,(0,i.kt)("b",null,"Figure 2"),". ",(0,i.kt)("i",null,"Wheatstone Bridge Configuration")))),(0,i.kt)("h2",{id:"hardware-overview"},"Hardware Overview"),(0,i.kt)("div",{align:"center"},(0,i.kt)("figure",null,(0,i.kt)("p",{style:{textAlign:"center"}},(0,i.kt)("a",{href:"https://files.seeedstudio.com/wiki/Grove--5A_DC-AC_Current_Sensor-ACS70331/img/pinout.jpg",target:"_blank"},(0,i.kt)("img",{src:"https://files.seeedstudio.com/wiki/Grove--5A_DC-AC_Current_Sensor-ACS70331/img/pinout.jpg"}))),(0,i.kt)("figcaption",null,(0,i.kt)("b",null,"Figure 3"),". ",(0,i.kt)("i",null,"Pinout")))),(0,i.kt)("h2",{id:"platforms-supported"},"Platforms Supported"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Arduino"),(0,i.kt)("th",{parentName:"tr",align:null},"Raspberry Pi"),(0,i.kt)("th",{parentName:"tr",align:null}),(0,i.kt)("th",{parentName:"tr",align:null}),(0,i.kt)("th",{parentName:"tr",align:null}))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("div",{align:"center"},(0,i.kt)("img",{width:"{1000}",src:"https://files.seeedstudio.com/wiki/wiki_english/docs/images/arduino_logo.jpg"}))),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("div",{align:"center"},(0,i.kt)("img",{width:"{1000}",src:"https://files.seeedstudio.com/wiki/wiki_english/docs/images/raspberry_pi_logo.jpg"}))),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("div",{align:"center"},(0,i.kt)("img",{width:"{1000}",src:"https://files.seeedstudio.com/wiki/wiki_english/docs/images/bbg_logo_n.jpg"}))),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("div",{align:"center"},(0,i.kt)("img",{width:"{1000}",src:"https://files.seeedstudio.com/wiki/wiki_english/docs/images/wio_logo_n.jpg"}))),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("div",{align:"center"},(0,i.kt)("img",{width:"{1000}",src:"https://files.seeedstudio.com/wiki/wiki_english/docs/images/linkit_logo_n.jpg"})))))),(0,i.kt)("h2",{id:"getting-started"},"Getting Started"),(0,i.kt)("admonition",{title:"Danger",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"The human body is forbidden to touch the module during the test, otherwise there is danger of electric shock.")),(0,i.kt)("h3",{id:"play-with-arduino"},"Play With Arduino"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Materials required")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Seeeduino V4.2"),(0,i.kt)("th",{parentName:"tr",align:null},"Base Shield"),(0,i.kt)("th",{parentName:"tr",align:null},"\xb15A DC/AC Current Sensor (ACS70331)"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("div",{align:"center"},(0,i.kt)("img",{width:"{1000}",src:"https://files.seeedstudio.com/wiki/wiki_english/docs/images/seeeduino_v4.2.jpg"}))),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("div",{align:"center"},(0,i.kt)("img",{width:"{1000}",src:"https://files.seeedstudio.com/wiki/wiki_english/docs/images/base_shield.jpg"}))),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("div",{align:"center"},(0,i.kt)("img",{width:"{1000}",src:"https://files.seeedstudio.com/wiki/Grove--5A_DC-AC_Current_Sensor-ACS70331/img/thumbnail.jpg"})))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://www.seeedstudio.com/Seeeduino-V4.2-p-2517.html"},"Get ONE Now")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://www.seeedstudio.com/Base-Shield-V2-p-1378.html"},"Get ONE Now")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://www.seeedstudio.com/Grove-5A-DC-AC-Current-Sensor-ACS70331-p-2928.html"},"Get ONE Now"))))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"In addition, you can consider our new ",(0,i.kt)("a",{parentName:"p",href:"https://www.seeedstudio.com/Seeeduino-Lotus-Cortex-M0-p-2896.html"},"Seeeduino Lotus M0+"),", which is equivalent to the combination of Seeeduino V4.2 and Baseshield.")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("strong",{parentName:"p"},"1")," Please plug the USB cable gently, otherwise you may damage the port. Please use the USB cable with 4 wires inside, the 2 wires cable can't transfer data. If you are not sure about the wire you have, you can click ",(0,i.kt)("a",{parentName:"p",href:"https://www.seeedstudio.com/Micro-USB-Cable-48cm-p-1475.html"},"here")," to buy"),(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("strong",{parentName:"p"},"2")," Each Grove module comes with a Grove cable when you buy. In case you lose the Grove cable, you can click ",(0,i.kt)("a",{parentName:"p",href:"https://www.seeedstudio.com/Grove-Universal-4-Pin-Buckled-20cm-Cable-%285-PCs-pack%29-p-936.html"},"here")," to buy.")),(0,i.kt)("h4",{id:"dc-demo"},"DC Demo"),(0,i.kt)("h5",{id:"hardware-connection"},"Hardware Connection"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Step 1.")," Connect the Grove - \xb15A DC/AC Current Sensor (ACS70331) to the ",(0,i.kt)("strong",{parentName:"p"},"A0")," port of the Base Shield.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Step 2.")," Connect the positive and negative poles of the circuit to be tested to the corresponding positive and negative poles of the screw terminal."))),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"If you reverse the positive and negative poles, the reading will be reversed. This sensor need calibration before use, so please do not power on the circuit first.")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Step 3.")," Plug Grove - Base Shield into Seeeduino.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Step 4.")," Connect Seeeduino to PC via a USB cable."))),(0,i.kt)("div",{align:"center"},(0,i.kt)("figure",null,(0,i.kt)("p",{style:{textAlign:"center"}},(0,i.kt)("a",{href:"https://files.seeedstudio.com/wiki/Grove--5A_DC-AC_Current_Sensor-ACS70331/img/101020615-connect.png",target:"_blank"},(0,i.kt)("img",{src:"https://files.seeedstudio.com/wiki/Grove--5A_DC-AC_Current_Sensor-ACS70331/img/101020615-connect.png"}))),(0,i.kt)("figcaption",null,(0,i.kt)("b",null,"Figure 4"),". ",(0,i.kt)("i",null,"We use the DC Power Supply in this demo, please set the current to 0A or do not power on it at first")))),(0,i.kt)("h5",{id:"software"},"Software"),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"If this is the first time you work with Arduino, we strongly recommend you to see ",(0,i.kt)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/Getting_Started_with_Arduino/"},"Getting Started with Arduino")," before the start.")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Step 1.")," Download the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Seeed-Studio/Grove_Current_Sensor"},"Grove Current Sensor")," Library from Github.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Step 2.")," In the /example/ folder, you can find the demo code. Here we take the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Seeed-Studio/Grove_Current_Sensor/blob/master/examples/Grove_5A_DC_Current_Sensor/Grove_5A_DC_Current_Sensor.ino"},"Grove - \xb15A DC/AC Current Sensor (ACS70331)")," for instance. Just click the ",(0,i.kt)("strong",{parentName:"p"},"Grove_5A_DC_Current_Sensor.ino")," to open the demo. Or you can copy the following code:"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-C++"},'#ifdef ARDUINO_SAMD_VARIANT_COMPLIANCE\n  #define RefVal 3.3\n  #define SERIAL SerialUSB\n#else\n  #define RefVal 5.0\n  #define SERIAL Serial\n#endif\n//An OLED Display is required here\n//use pin A0\n#define Pin A5\n\n// Take the average of 500 times\n\nconst int averageValue = 500;\n\nlong int sensorValue = 0;\n\nfloat sensitivity = 1000.0 / 200.0; //1000mA per 200mV \n\n\nfloat Vref = 1508;\n\nvoid setup() \n{\n  SERIAL.begin(9600);\n}\n\nvoid loop() \n{\n  // Read the value 500 times:\n  for (int i = 0; i < averageValue; i++)\n  {\n    sensorValue += analogRead(Pin);\n\n    // wait 2 milliseconds before the next loop\n    delay(2);\n\n  }\n\n  sensorValue = sensorValue / averageValue;\n \n\n  // The on-board ADC is 10-bits \n  // Different power supply will lead to different reference sources\n  // example: 2^10 = 1024 -> 5V / 1024 ~= 4.88mV\n  //          unitValue= 5.0 / 1024.0*1000 ;\n  float unitValue= RefVal / 1024.0*1000 ;\n  float voltage = unitValue * sensorValue; \n\n  //When no load,Vref=initialValue\n  SERIAL.print("initialValue: ");\n  SERIAL.print(voltage);\n  SERIAL.println("mV"); \n  \n  // Calculate the corresponding current\n  float current = (voltage - Vref) * sensitivity;\n\n  // Print display voltage (mV)\n  // This voltage is the pin voltage corresponding to the current\n  /*\n  voltage = unitValue * sensorValue-Vref;\n  SERIAL.print(voltage);\n  SERIAL.println("mV");\n  */\n\n  // Print display current (mA)\n  SERIAL.print(current);\n  SERIAL.println("mA");\n   \n  SERIAL.print("\\n");\n\n  // Reset the sensorValue for the next reading\n  sensorValue = 0;\n  // Read it once per second\n  delay(1000);\n}\n\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Step 3.")," Upload the demo. If you do not know how to upload the code, please check ",(0,i.kt)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/Upload_Code/"},"How to upload code"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Step 4.")," Open the ",(0,i.kt)("strong",{parentName:"p"},"Serial Monitor")," of Arduino IDE by click ",(0,i.kt)("strong",{parentName:"p"},"Tool-> Serial Monitor"),". Or tap the ++ctrl+shift+m++ key at the same time. Set the baud rate to ",(0,i.kt)("strong",{parentName:"p"},"9600"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Step 5. Calibration"),(0,i.kt)("br",{parentName:"p"}),"\n","When there is no current flowing, the sensor will still have a output value. We call this value ",(0,i.kt)("strong",{parentName:"p"},"zero offset"),"."))),(0,i.kt)("div",{align:"center"},(0,i.kt)("figure",null,(0,i.kt)("p",{style:{textAlign:"center"}},(0,i.kt)("a",{href:"https://files.seeedstudio.com/wiki/Grove--5A_DC-AC_Current_Sensor-ACS70331/img/ca1.jpg",target:"_blank"},(0,i.kt)("img",{src:"https://files.seeedstudio.com/wiki/Grove--5A_DC-AC_Current_Sensor-ACS70331/img/ca1.jpg"}))),(0,i.kt)("figcaption",null,(0,i.kt)("b",null,"Figure 5"),". ",(0,i.kt)("i",null,"The zero offset of this board is 595.70mV\uff0cConverted into current is -4561.48mA")))),(0,i.kt)("p",null,"Due to the presence of zero offset, the sensor will also have a reading when there is no current. So we set a parameter ",(0,i.kt)("strong",{parentName:"p"},"Vref")," to fix it, you can find it in the code block above."),(0,i.kt)("p",null,"Line 32:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-C++"},"float Vref = 1508; \n//Vref is zero drift value, you need to change this value to the value you actually measured before using it.\n")),(0,i.kt)("p",null,"In the demo code, we set the Vref to 1508, however, the zero offset value varies from board to board. As you know, the board we use in this demo is 595.70. So let's modify the Line 21:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-C++"},"float Vref = 595.70;\n")),(0,i.kt)("p",null,"Then save the code and upload the code again, follow the Step 2. and Step 3. Now let's see\uff1a"),(0,i.kt)("div",{align:"center"},(0,i.kt)("figure",null,(0,i.kt)("p",{style:{textAlign:"center"}},(0,i.kt)("a",{href:"https://files.seeedstudio.com/wiki/Grove--5A_DC-AC_Current_Sensor-ACS70331/img/ca2.jpg",target:"_blank"},(0,i.kt)("img",{src:"https://files.seeedstudio.com/wiki/Grove--5A_DC-AC_Current_Sensor-ACS70331/img/ca2.jpg"}))),(0,i.kt)("figcaption",null,(0,i.kt)("b",null,"Figure 6"),". ",(0,i.kt)("i",null,"Now the current zero offset turns to 0.02mA")))),(0,i.kt)("p",null,"When the current output becomes to 0mA or a small value, you have completed the calibration."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Step 6.")," Now it's all yours, you can power up the current. Please feel free to use it, remember this is a 5A Current Sensor, current cannot exceed 5A!  ")),(0,i.kt)("p",null,"If you want to know the calculation formula of the result, please refer to the ",(0,i.kt)("a",{parentName:"p",href:"#faq"},"FAQ Q1")),(0,i.kt)("h4",{id:"ac-demo"},"AC Demo"),(0,i.kt)("admonition",{title:"Danger",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"When you use AC power, please pay attention to safety and avoid electric shock.")),(0,i.kt)("p",null,"For the hardware connection and calibration part, please refer to the ",(0,i.kt)("a",{parentName:"p",href:"#dc-demo"},"DC Demo"),", the only difference is the code. Please use the following code for AC load."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-C++"},'#ifdef ARDUINO_SAMD_VARIANT_COMPLIANCE\n  #define RefVal 3.3\n  #define SERIAL SerialUSB\n#else\n  #define RefVal 5.0\n  #define SERIAL Serial\n#endif\n//An OLED Display is required here\n//use pin A0\n#define Pin A5\n\n// Take the average of 500 times\n\nconst int averageValue = 500;\n\nlong int sensorValue = 0;\n\nfloat sensitivity = 1000.0 / 200.0; //1000mA per 200mV \n\n\n//float Vref = 244;\nfloat Vref = 1494;\n\nvoid setup() \n{\n  SERIAL.begin(9600);\n}\nstatic float tempval;\nvoid loop() \n{\n\n  // Read the value 500 times:\n  for(int i=0;i<20;i++)\n  {\n\n  for (int i = 0; i < averageValue; i++)\n  {\n    int temp;\n    temp= analogRead(Pin);\n    if(temp>sensorValue)\n    {\n        sensorValue=temp;\n    }\n    delayMicroseconds(40);\n  }\n  tempval+=sensorValue;\n  }\n\n  sensorValue=tempval/20.0;\n  tempval=0;\n  // The on-board ADC is 10-bits \n  // Different power supply will lead to different reference sources\n  // example: 2^10 = 1024 -> 5V / 1024 ~= 4.88mV\n  //          unitValue= 5.0 / 1024.0*1000 ;\n  float unitValue= RefVal / 1024.0*1000 ;\n  float voltage = unitValue * sensorValue; \n\n  //When no load,Vref=initialValue\n  SERIAL.print("initialValue: ");\n  SERIAL.print(voltage);\n  SERIAL.println("mV"); \n  \n  // Calculate the corresponding current\n  float current = ((voltage - Vref) * sensitivity)*0.707;\n\n  // Print display voltage (mV)\n  // This voltage is the pin voltage corresponding to the current\n  \n  voltage = unitValue * sensorValue-Vref;\n  SERIAL.print(voltage);\n  SERIAL.println("mV");\n  \n\n  // Print display current (mA)\n  SERIAL.print("current: ")\n  SERIAL.print(current);\n  SERIAL.println("mA");\n   \n  SERIAL.print("\\n");\n\n\n  // Reset the sensorValue for the next reading\n  sensorValue = 0;\n\n  // Read it once per second\n  delay(1000);\n}\n\n')),(0,i.kt)("h2",{id:"faq"},"FAQ"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Q1#")," What's the current calculation formula?"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"A1:")," If you think the ",(0,i.kt)("a",{parentName:"p",href:"#working-principle"},"principle part")," is very complicated, let's put it in a easy way. The current in the circuit to be tested excites the magnetic field, which causes the resistance value of the GMR elements change. And the resistance change  in the bridge causes a change in the voltage at the output of the chip. We call the voltage output as ",(0,i.kt)("strong",{parentName:"p"},"V",(0,i.kt)("sub",null,"IOUT")),"."),(0,i.kt)("div",null,(0,i.kt)("p",{style:{textAlign:"center"}},"V",(0,i.kt)("sub",null,"IOUT")," = Sens \xd7 I",(0,i.kt)("sub",null,"p")," + V",(0,i.kt)("sub",null,"IOUT(Q)"))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Sens"),": Sens is the coefficient that converts the current into an output voltage. For this module it is 200mA/V.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"I",(0,i.kt)("sub",null,"p")),": I",(0,i.kt)("sub",null,"p")," is the current value in the circuit to be tested, Unit mA.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"V",(0,i.kt)("sub",null,"IOUT(Q)")),": V",(0,i.kt)("sub",null,"IOUT(Q)")," is the voltage output when the I",(0,i.kt)("sub",null,"p")," is 0mA(which means there is no current in the circuit to be tested), Unit mV.")),(0,i.kt)("p",null,"Here comes the current value:  "),(0,i.kt)("div",null,(0,i.kt)("p",{style:{textAlign:"center"}},"I",(0,i.kt)("sub",null,"p")," = (V",(0,i.kt)("sub",null,"IOUT")," - V",(0,i.kt)("sub",null,"IOUT(Q)"),") / Sens")),(0,i.kt)("p",null,"Now, Let's review the figure 5, we will explain why the current value of the output is not 0 when the actual current value in the circuit to be tested is 0.  As you can see in the figure 5, the ",(0,i.kt)("strong",{parentName:"p"},"initialValue")," is 595.70mV, which is the ",(0,i.kt)("strong",{parentName:"p"},"V",(0,i.kt)("sub",null,"IOUT")),"; the current is -4561.48mA, which is the ",(0,i.kt)("strong",{parentName:"p"},"I",(0,i.kt)("sub",null,"p")),". As for the ",(0,i.kt)("strong",{parentName:"p"},"V",(0,i.kt)("sub",null,"IOUT(Q)")),", it is the ",(0,i.kt)("strong",{parentName:"p"},"Vref")," we set in the code.\nIn figure 5, it is 1508. And the ",(0,i.kt)("strong",{parentName:"p"},"Sens")," is 200mA/V, which is 200mA/1000mV. Now, just do some math:"),(0,i.kt)("div",null,(0,i.kt)("p",{style:{textAlign:"center"}},"{","(595.70mV-1508mV ) / (200mA/1000mV)","}"," = -4561.50mA")),(0,i.kt)("p",null,"So, in the figure 6, when we set the ",(0,i.kt)("strong",{parentName:"p"},"Vref")," to 595.70, the ",(0,i.kt)("strong",{parentName:"p"},"Ip")," turns to 0mA."),(0,i.kt)("h2",{id:"schematic-online-viewer"},"Schematic Online Viewer"),(0,i.kt)("div",{className:"altium-ecad-viewer","data-project-src":"https://files.seeedstudio.com/wiki/Grove--5A_DC-AC_Current_Sensor-ACS70331/res/5A%20DCAC%20Current%20Sensor(ACS70331)%20v1.0.zip",style:{borderRadius:"0px 0px 4px 4px",height:500,borderStyle:"solid",borderWidth:1,borderColor:"rgb(241, 241, 241)",overflow:"hidden",maxWidth:1280,maxHeight:700,boxSizing:"border-box"}}),(0,i.kt)("h2",{id:"resources"},"Resources"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"[ZIP]")," ",(0,i.kt)("a",{parentName:"li",href:"https://files.seeedstudio.com/wiki/Grove--5A_DC-AC_Current_Sensor-ACS70331/res/5A%20DCAC%20Current%20Sensor(ACS70331)%20v1.0.zip"},"Grove - \xb15A DC/AC Current Sensor (ACS70331) Schematic file")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"[PDF]")," ",(0,i.kt)("a",{parentName:"li",href:"https://files.seeedstudio.com/wiki/Grove-2.5A_DC_Current_Sensor-ACS70331/res/Current_Sensor_ACS70331.pdf"},"ACS70331 Datasheet"))),(0,i.kt)("h2",{id:"tech-support"},"Tech Support"),(0,i.kt)("p",null,"Please submit any technical issue into our ",(0,i.kt)("a",{parentName:"p",href:"https://forum.seeedstudio.com/"},"forum")),(0,i.kt)("div",null,(0,i.kt)("br",null),(0,i.kt)("p",{style:{textAlign:"center"}},(0,i.kt)("a",{href:"https://www.seeedstudio.com/act-4.html?utm_source=wiki&utm_medium=wikibanner&utm_campaign=newproducts",target:"_blank"},(0,i.kt)("img",{src:"https://files.seeedstudio.com/wiki/Wiki_Banner/new_product.jpg"})))))}d.isMDXComponent=!0}}]);
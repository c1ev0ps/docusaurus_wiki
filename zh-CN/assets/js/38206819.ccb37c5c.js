"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[66243],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),u=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=u(e.components);return o.createElement(s.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=u(n),h=r,m=p["".concat(s,".").concat(h)]||p[h]||c[h]||a;return n?o.createElement(m,i(i({ref:t},d),{},{components:n})):o.createElement(m,i({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:r,i[1]=l;for(var u=2;u<a;u++)i[u]=n[u];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},43639:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>u});var o=n(87462),r=(n(67294),n(3905));const a={description:"Flashing the Arduino Bootloader using DAP Link",title:"Flashing the Arduino Bootloader using DAP Link",keywords:["Sorftware"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S.png",last_update:{date:"1/16/2023",author:"jianjing Huang"}},i="Flashing the Arduino Bootloader using DAP Link",l={unversionedId:"Software/Flashing-Arduino-Bootloader-DAPLink",id:"Software/Flashing-Arduino-Bootloader-DAPLink",title:"Flashing the Arduino Bootloader using DAP Link",description:"Flashing the Arduino Bootloader using DAP Link",source:"@site/docs/Software/Flashing-Arduino-Bootloader-DAPLink.md",sourceDirName:"Software",slug:"/Software/Flashing-Arduino-Bootloader-DAPLink",permalink:"/docusaurus_wiki/zh-CN/Software/Flashing-Arduino-Bootloader-DAPLink",draft:!1,editUrl:"https://github.com/c1ev0ps/docusaurus_wiki/edit/main/docs/Software/Flashing-Arduino-Bootloader-DAPLink.md",tags:[],version:"current",lastUpdatedBy:"jianjing Huang",lastUpdatedAt:1673827200,formattedLastUpdatedAt:"2023\u5e741\u670816\u65e5",frontMatter:{description:"Flashing the Arduino Bootloader using DAP Link",title:"Flashing the Arduino Bootloader using DAP Link",keywords:["Sorftware"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S.png",last_update:{date:"1/16/2023",author:"jianjing Huang"}}},s={},u=[{value:"Preparations",id:"preparations",level:2},{value:"Get Started",id:"get-started",level:2},{value:"Tech Support",id:"tech-support",level:2}],d={toc:u};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"flashing-the-arduino-bootloader-using-dap-link"},"Flashing the Arduino Bootloader using DAP Link"),(0,r.kt)("p",null,"This is the Wiki Tutorial of how to use DAP link (OpenOCD) to flash the Arduino Bootloader into Arduino Boards. If your Arduino Board's bootloader is interrupted, you can use this guide to re-flash the bootloader back."),(0,r.kt)("h2",{id:"preparations"},"Preparations"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"First thing first, you must follow the ",(0,r.kt)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/Arduino-DAPLink/"},(0,r.kt)("strong",{parentName:"a"},"How to use Arduino Borads as DAPLink Device"))," first to turn one of your SAMD boards to DAP-Link Device. Once you have configured and ",(0,r.kt)("strong",{parentName:"p"},"uploaded the daplink Arduino ino program"),", you can come back to this wiki tutorial.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Connect the Target Hardware with the DAP Link Device(SAMD Board) according to the Pin configurations."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"SWO > SWO"),(0,r.kt)("li",{parentName:"ul"},"CLK > CLK"),(0,r.kt)("li",{parentName:"ul"},"GND > GND")))),(0,r.kt)("p",null,"It may look something like this where the Seeeduino XIAO is the DAP Link deivce and Seeeduino Cortex M0+ is the Target."),(0,r.kt)("div",{align:"center"},(0,r.kt)("img",{src:"https://files.seeedstudio.com/wiki/DAPlink-example/examples.png"})),(0,r.kt)("h2",{id:"get-started"},"Get Started"),(0,r.kt)("p",null,"In this example, Seeeduino XIAO is acted as a DAPLink device and used to flash the Arduino Bootloader for Seeeduino Lotus Cortex M0+."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Navigate to the ",(0,r.kt)("strong",{parentName:"li"},"root location of the Arduino Board Library Path")," in Terminal and find the OpenOCD path within the path. It may look something like this:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"cd ~/Library/Arduino15/packages/arduino/tools/openocd/\ncd 0.10.0-arduino7/bin # Version might vary here\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Run the OpenOCD with specific scripts:")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note:")," You may need to change ",(0,r.kt)("inlineCode",{parentName:"p"},"ansonhe")," to your username or adjust to your correct path."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./openocd -s ../share/openocd/scripts/ -f /Users/ansonhe/Library/Arduino15/packages/Seeeduino/hardware/samd/1.7.9/variants/arduino_zero/openocd_scripts/arduino_zero.cfg\n")),(0,r.kt)("p",null,"If everything goes well, you should see something like this as followed:"),(0,r.kt)("div",{align:"center"},(0,r.kt)("img",{src:"https://files.seeedstudio.com/wiki/DAPlink-example/server.png"})),(0,r.kt)("p",null,"Now the server it's up and running!"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Leave the previous terminal and open a new terminal. Also navigate to the root location of Arduino Board path. Then navigate to the arm-gcc path:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"cd ~/Library/Arduino15/packages/Seeeduino/tools/arm-none-eabi-gcc/7-2017q4/bin\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Under this path, you can run the following:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./arm-none-eabi-gdb\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Once within the gdb, connect with target using:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"target remote localhost:3333\n")),(0,r.kt)("div",{align:"center"},(0,r.kt)("img",{src:"https://files.seeedstudio.com/wiki/DAPlink-example/target.png"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Load the Arduino Bootloader from the Arduino Board library root path:")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"You may also find the bootloader for Seeed SAMD boards here: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/Seeed-Studio/ArduinoCore-samd/tree/master/bootloaders"},"https://github.com/Seeed-Studio/ArduinoCore-samd/tree/master/bootloaders"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note:")," You may need to change ",(0,r.kt)("inlineCode",{parentName:"p"},"ansonhe")," to your username or adjust to your correct path."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"file /Users/ansonhe/Library/Arduino15/packages/Seeeduino/hardware/samd/1.7.9/bootloaders/zero/samd21_sam_ba.elf\n")),(0,r.kt)("div",{align:"center"},(0,r.kt)("img",{src:"https://files.seeedstudio.com/wiki/DAPlink-example/file.png"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Flash the bootloader to the target:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"load\n")),(0,r.kt)("div",{align:"center"},(0,r.kt)("img",{src:"https://files.seeedstudio.com/wiki/DAPlink-example/load.png"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Reset the target device by pressing reset buttons and you should see that COM appeared. Now the Arduino Bootloader is flashed to Seeeduino Lotus Cortex M0+ using Seeeduino XIAO as DAPLink Device!")),(0,r.kt)("div",{align:"center"},(0,r.kt)("img",{src:"https://files.seeedstudio.com/wiki/DAPlink-example/ports.png"})),(0,r.kt)("h2",{id:"tech-support"},"Tech Support"),(0,r.kt)("p",null,"Please submit any technical issue into our ",(0,r.kt)("a",{parentName:"p",href:"https://forum.seeedstudio.com/"},"forum"),"."),(0,r.kt)("br",null),(0,r.kt)("p",{style:{textAlign:"center"}},(0,r.kt)("a",{href:"https://www.seeedstudio.com/act-4.html?utm_source=wiki&utm_medium=wikibanner&utm_campaign=newproducts",target:"_blank"},(0,r.kt)("img",{src:"https://files.seeedstudio.com/wiki/Wiki_Banner/new_product.jpg"}))))}p.isMDXComponent=!0}}]);